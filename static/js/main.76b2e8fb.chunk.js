(this.webpackJsonpultron=this.webpackJsonpultron||[]).push([[0],{331:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n.n(r),o=n(66),a=n(19),i=n(12),s=n(78),l=n(379),u=n(377),p=n(380),d=n(3),j=function(e){var t=e.message;return Object(d.jsx)(l.a,{styles:{root:{backgroundColor:"#e1dfdd",padding:"8px",borderRadius:"5px"}},children:Object(d.jsx)(p.a,{children:t})})},b=n(70),f=n.n(b),h=(n(106),n(79)),x=function(e){var t=e.snippet,n=t.match(/^(\w+)\n/),r=n?n[1]:null,c=t.replace(/^\w+\n/,""),o=f.a.highlightAuto(c,r?[r]:null).value;return Object(d.jsxs)("div",{style:{position:"relative",backgroundColor:"#f1f1f1",border:"1px solid #ccc",borderRadius:"3px",padding:"8px",marginBottom:"8px"},children:[Object(d.jsx)("pre",{style:{overflowX:"auto",whiteSpace:"pre-wrap",wordWrap:"break-word"},dangerouslySetInnerHTML:{__html:o}}),Object(d.jsx)(h.a,{style:{cursor:"pointer",position:"absolute",right:"8px",top:"8px",color:"#0078d4",fontSize:"1.2rem"},onClick:function(){navigator.clipboard.writeText(c)}})]})},g=function(e){var t=e.children;return Object(d.jsx)(l.a,{horizontalAlign:"center",verticalAlign:"center",verticalFill:!0,styles:{root:{width:"100%",height:"100vh",margin:"0 auto",textAlign:"left",color:"#605e5c"}},gap:15,children:Object(d.jsx)(l.a.Item,{styles:{root:{width:"100%"}},children:t})})},m=function(e){var t=e.message;return Object(d.jsx)(l.a,{styles:{root:{backgroundColor:"transparent",padding:"8px",borderRadius:"5px"}},children:Object(d.jsx)(p.a,{children:t})})},O=n(373),v=n(381),y=n(374),k=n(375),w=n(59),C=n(71),S=n(378),B=n(77),D=n.n(B),R=n(76),z=n.n(R),F=function(e){var t=e.onDocumentDataReceived,n=Object(r.useState)(null),c=Object(i.a)(n,2),o=c[0],a=c[1],s=function(){var e=Object(C.a)(Object(w.a)().mark((function e(){var n,r,c;return Object(w.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o){e.next=2;break}return e.abrupt("return");case 2:return(n=new FormData).append("files",o),e.prev=4,e.next=7,fetch("".concat("https://9477-44-208-85-154.ngrok-free.app","/upload_documents"),{method:"POST",body:n});case 7:return r=e.sent,e.next=10,r.json();case 10:c=e.sent,console.log(c),t(c),a(null),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),console.error(e.t0);case 19:case"end":return e.stop()}}),e,null,[[4,16]])})));return function(){return e.apply(this,arguments)}}();return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("input",{type:"file",accept:".pdf,.docx",onChange:function(e){a(e.target.files[0])},style:{display:"none"},id:"fileInput"}),Object(d.jsx)("label",{htmlFor:"fileInput",children:Object(d.jsx)(S.a,{component:"span",color:"primary",style:{padding:0},children:Object(d.jsx)(z.a,{fontSize:"large"})})}),o&&Object(d.jsx)(S.a,{color:"primary",onClick:s,style:{marginLeft:"0px",padding:0},children:Object(d.jsx)(D.a,{fontSize:"large"})})]})},I=Object(O.a)((function(e){return{appBar:{backgroundColor:"#ffffff"},title:{flexGrow:1,color:"#000000"},container:{width:"100%"}}})),T=function(){var e=I();return Object(d.jsx)("div",{className:e.container,children:Object(d.jsx)(v.a,{position:"static",className:e.appBar,children:Object(d.jsxs)(y.a,{children:[Object(d.jsx)(k.a,{variant:"h6",className:e.title,children:"DocSphere"}),Object(d.jsx)(F,{onDocumentDataReceived:function(e){console.log("Document data received:",e)}})]})})})},N=n(60),_=function(){var e=Object(r.useState)(""),t=Object(i.a)(e,2),n=t[0],o=t[1],p=Object(r.useState)([]),b=Object(i.a)(p,2),f=b[0],h=b[1],O=Object(r.useState)(!1),v=Object(i.a)(O,2),y=v[0],k=v[1],w=Object(r.useRef)(null),C=Object(r.useCallback)((function(){fetch("https://9477-44-208-85-154.ngrok-free.app/get_answer/?question=".concat(n," && k=2"),{headers:{"ngrok-skip-browser-warning":"1"}}).then((function(e){return e.json()})).then((function(e){console.log(e);var t=e.answer.startsWith("@error:"),n=S(t?e.answer.replace("@error:",""):e.answer),r=e.reference.reduce((function(e,t){return e[t.link]||(e[t.link]=[]),e[t.link].push(t.pageNo),e}),{}),c=t?null:Object.entries(r).map((function(e,t){var n=Object(i.a)(e,2),r=n[0],c=n[1];return Object(d.jsxs)("a",{href:"https://9477-44-208-85-154.ngrok-free.app/?file=".concat(r),target:"_blank",rel:"noopener noreferrer",style:{marginRight:"8px"},children:["link",t+1,c.map((function(e,t){return Object(d.jsxs)("span",{children:["[",e,"]"]},t)}))]},t)})),o={message:Object(d.jsxs)(d.Fragment,{children:[n,Object(d.jsx)("br",{}),c]}),isBot:!0};h((function(e){return[].concat(Object(a.a)(e.slice(0,-1)),[o])}))})).catch((function(e){console.error(e)}))}),[n]);Object(r.useEffect)((function(){y&&(C(),k(!1),o(""))}),[y,C]),Object(r.useEffect)((function(){w.current&&(w.current.scrollTop=w.current.scrollHeight)}),[f]);var S=function(e){return"string"===typeof e?e.split("```").map((function(e,t){return t%2===1?Object(d.jsx)(x,{snippet:e},t):Object(d.jsx)("span",{children:e.split("\n").map((function(e,t){return Object(d.jsxs)(c.a.Fragment,{children:[e,Object(d.jsx)("br",{})]},t)}))},t)})):e},B=Object(s.l)(),D=Object(s.m)({title:{fontWeight:"bold",fontSize:"2rem",color:B.palette.themePrimary},inputContainer:{width:"100%",display:"flex",alignItems:"center"},inputBox:{flexGrow:1,marginRight:"8px",borderRadius:"25px",border:"2px solid",borderColor:B.palette.themePrimary,paddingLeft:"12px",paddingRight:"12px",paddingTop:"4px",paddingBottom:"4px",":hover":{borderColor:B.palette.themeDark},":focus-within":{borderColor:B.palette.themeDark}}});return Object(d.jsxs)(g,{children:[Object(d.jsx)(T,{style:{width:"100%"}}),Object(d.jsx)(l.a.Item,{children:Object(d.jsx)("div",{style:{display:"flex",flexDirection:"column",height:"70vh",overflow:"auto"},ref:w,children:f.map((function(e,t){return Object(d.jsx)("div",{style:{display:"flex",justifyContent:e.isBot?"flex-start":"flex-end",marginBottom:"8px"},children:e.isBot?Object(d.jsx)(j,{message:e.message&&S(e.message)}):Object(d.jsx)(m,{message:S(e.message)})},t)}))})}),Object(d.jsxs)(l.a,{horizontal:!0,gap:15,styles:{root:{width:"100%"}},children:[Object(d.jsx)(N.a,{icon:"game-icons:magic-broom",style:{cursor:"pointer",fontSize:"1.5rem",color:B.palette.redDark,alignSelf:"center"},onClick:function(){h([])}}),Object(d.jsx)(u.a,{className:D.inputBox,value:n,onChange:function(e){o(e.target.value)},autoComplete:"off",autoFocus:!0,multiline:!0,resizable:!1,underlined:!0,placeholder:"Type..."}),Object(d.jsx)(N.a,{icon:"fluent:send-16-regular",style:{cursor:"pointer",fontSize:"1.5rem",color:B.palette.themePrimary,alignSelf:"center"},onClick:function(){if(n){var e={message:"Typing...",isBot:!0};h((function(t){return[].concat(Object(a.a)(t),[{message:n,isBot:!1},e])})),k(!0)}}})]})]})},A=document.getElementById("root");Object(o.createRoot)(A).render(Object(d.jsx)(r.StrictMode,{children:Object(d.jsx)(_,{})}))}},[[331,1,2]]]);
//# sourceMappingURL=main.76b2e8fb.chunk.js.map